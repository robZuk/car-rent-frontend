{"ast":null,"code":"var _jsxFileName = \"E:\\\\ROBERT PROJECTS\\\\car-rental2022\\\\frontend\\\\src\\\\screens\\\\CarEditScreen.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useParams, useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Message from \"../components/Message\";\nimport Loader from \"../components/Loader\";\nimport ModalCalendar from \"../components/ModalCalendar\";\nimport { listCarDetails, updateCar } from \"../actions/carActions\";\nimport { CAR_UPDATE_RESET } from \"../constants/carConstants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CarEditScreen() {\n  _s();\n\n  const params = useParams();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const carId = params.id;\n  const [name, setName] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n  const [images, setImages] = useState([]);\n  const [fuel, setFuel] = useState(\"\");\n  const [numOfPeople, setNumOfPeople] = useState(\"\");\n  const [engine, setEngine] = useState(\"\");\n  const [acceleration, setAcceleration] = useState(\"\");\n  const [gearbox, setGearbox] = useState(\"\");\n  const [price, setPrice] = useState(0);\n  const [category, setCategory] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [reservedDays, setReservedDays] = useState([]);\n  const [uploading, setUploading] = useState(false);\n  const [uploadImageError, setUploadImageError] = useState(\"\");\n  const [uploadImagesError, setUploadImagesError] = useState(\"\");\n  const carDetails = useSelector(state => state.carDetails);\n  const {\n    loading,\n    error,\n    car\n  } = carDetails;\n  const carUpdate = useSelector(state => state.carUpdate);\n  let {\n    loading: loadingUpdate,\n    error: errorUpdate,\n    success: successUpdate\n  } = carUpdate;\n  errorUpdate = \"dupa\";\n  useEffect(() => {\n    if (successUpdate) {\n      dispatch({\n        type: CAR_UPDATE_RESET\n      });\n      navigate(\"/admin/carlist\");\n    } else {\n      if (!car.name || car._id !== carId) {\n        dispatch(listCarDetails(carId));\n      } else {\n        setName(car.name);\n        setImage(car.image);\n        setImages(car.images);\n        setFuel(car.fuel);\n        setNumOfPeople(car.numOfPeople);\n        setEngine(car.engine);\n        setAcceleration(car.acceleration);\n        setGearbox(car.gearbox);\n        setPrice(car.price);\n        setCategory(car.category);\n        setDescription(car.description);\n        setReservedDays(car.reservedDays.map(day => day.substring(0, 10)));\n      }\n    }\n  }, [dispatch, navigate, carId, car, successUpdate]);\n\n  const uploadFileHandler = async e => {\n    const file = e.target.files[0];\n    const formData = new FormData();\n    formData.append(\"image\", file);\n    setUploading(true); //spinner\n\n    try {\n      const config = {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      };\n      const {\n        data\n      } = await axios.post(\"/api/upload\", formData, config);\n      setImage(data);\n      setUploading(false);\n    } catch (error) {\n      console.error(error);\n      setUploadImageError(\"Invalid file format. The correct file format is .jpg .jpeg .png .webp\");\n      setUploading(false);\n    }\n  };\n\n  const uploadFilesHandler = async e => {\n    const files = e.target.files;\n    const formData = new FormData();\n\n    for (let i = 0; i < files.length; i++) {\n      formData.append(\"images\", files[i]);\n    }\n\n    setUploading(true);\n\n    try {\n      const config = {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      };\n      const {\n        data\n      } = await axios.post(\"/api/upload/images\", formData, config);\n      setImages([...data]);\n      setUploading(false);\n    } catch (error) {\n      console.error(error);\n      setUploadImagesError(\"Invalid file format. The correct file format is .jpg .jpeg .png .webp\");\n      setUploading(false);\n    }\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(updateCar({\n      _id: carId,\n      name,\n      image,\n      images,\n      fuel,\n      numOfPeople,\n      engine,\n      acceleration,\n      gearbox,\n      price,\n      category,\n      description,\n      reservedDays\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/admin/carlist\",\n      className: \"btn btn-light my-3\",\n      children: \"Go Back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      style: {\n        height: \"40vh\",\n        marginTop: \"5vh\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-md-8 col-lg-6\",\n          style: {\n            border: \".5px solid lightgray\",\n            borderRadius: \"5px\",\n            padding: \"30px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Edit Car\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), loadingUpdate && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 31\n          }, this), errorUpdate && /*#__PURE__*/_jsxDEV(Message, {\n            variant: \"danger\",\n            children: errorUpdate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 29\n          }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, this) : error ? /*#__PURE__*/_jsxDEV(Message, {\n            variant: \"danger\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: submitHandler,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"name\",\n                className: \"form-label\",\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control \",\n                id: \"name\",\n                name: \"name\",\n                placeholder: \"Enter name\",\n                value: name,\n                onChange: e => setName(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 17\n            }, this), uploadImageError && /*#__PURE__*/_jsxDEV(Message, {\n              variant: \"alert-danger\",\n              children: uploadImageError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"image-file\",\n                className: \"form-label my-0\",\n                children: \"Main image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"list-group-flush p-0 m-0\",\n                children: /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"list-group-item\",\n                  children: image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control\",\n                type: \"file\",\n                id: \"image-file\",\n                onChange: uploadFileHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, this), uploading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, this), uploadImagesError && /*#__PURE__*/_jsxDEV(Message, {\n              variant: \"alert-danger\",\n              children: uploadImagesError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"images\",\n                className: \"form-label my-0\",\n                children: \"Images:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"list-group-flush p-0 m-0\",\n                children: images && images.map(image => /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"list-group-item\",\n                  children: image\n                }, image, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control\",\n                type: \"file\",\n                id: \"image-file\",\n                multiple: true,\n                \"aria-label\": \"Upload\",\n                onChange: uploadFilesHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 19\n              }, this), uploading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"fuel\",\n                className: \"form-label\",\n                children: \"Fuel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                id: \"fuel\",\n                name: \"fuel\",\n                placeholder: \"Enter fuel\",\n                value: fuel,\n                onChange: e => setFuel(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"numOfPeople\",\n                className: \"form-label\",\n                children: \"Number Of People\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                id: \"numOfPeople\",\n                name: \"numOfPeople\",\n                placeholder: \"Enter numOfPeople\",\n                value: numOfPeople,\n                onChange: e => setNumOfPeople(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"acceleration\",\n                className: \"form-label\",\n                children: \"Acceleration\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                id: \"acceleration\",\n                name: \"acceleration\",\n                placeholder: \"Enter acceleration\",\n                value: acceleration,\n                onChange: e => setAcceleration(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"gearbox\",\n                className: \"form-label\",\n                children: \"Gearbox\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                id: \"gearbox\",\n                name: \"gearbox\",\n                placeholder: \"Enter gearbox\",\n                value: gearbox,\n                onChange: e => setGearbox(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"price\",\n                className: \"form-label\",\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                id: \"price\",\n                name: \"price\",\n                placeholder: \"Enter price\",\n                value: price,\n                onChange: e => setPrice(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"category\",\n                className: \"form-label\",\n                children: \"Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                id: \"category\",\n                name: \"category\",\n                placeholder: \"Enter category\",\n                value: category,\n                onChange: e => setCategory(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"description\",\n                className: \"form-label\",\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                id: \"description\",\n                name: \"description\",\n                placeholder: \"Enter description\",\n                value: description,\n                onChange: e => setDescription(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label my-0\",\n                children: \"Reserved days: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"list-group-flush p-0 m-0\",\n                children: reservedDays && reservedDays.map(day => /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"list-group-item\",\n                  children: day\n                }, day, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"my-1\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-sm\",\n                  \"data-bs-toggle\": \"modal\",\n                  \"data-bs-target\": \"#modalCalendar\",\n                  style: {\n                    width: \"110px\",\n                    backgroundColor: \"#e9ecef\"\n                  },\n                  children: \"Choose dates\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-cardialred mt-3\",\n              children: \"Update/Create Car\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ModalCalendar, {\n            id: carId,\n            setReservedDatesByAdmin: setReservedDays\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CarEditScreen, \"c6W0bVYWOZWH4hNOxD18Zou5zeg=\", false, function () {\n  return [useParams, useNavigate, useDispatch, useSelector, useSelector];\n});\n\n_c = CarEditScreen;\nexport default CarEditScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"CarEditScreen\");","map":{"version":3,"sources":["E:/ROBERT PROJECTS/car-rental2022/frontend/src/screens/CarEditScreen.js"],"names":["axios","React","useState","useEffect","Link","useParams","useNavigate","useDispatch","useSelector","Message","Loader","ModalCalendar","listCarDetails","updateCar","CAR_UPDATE_RESET","CarEditScreen","params","navigate","dispatch","carId","id","name","setName","image","setImage","images","setImages","fuel","setFuel","numOfPeople","setNumOfPeople","engine","setEngine","acceleration","setAcceleration","gearbox","setGearbox","price","setPrice","category","setCategory","description","setDescription","reservedDays","setReservedDays","uploading","setUploading","uploadImageError","setUploadImageError","uploadImagesError","setUploadImagesError","carDetails","state","loading","error","car","carUpdate","loadingUpdate","errorUpdate","success","successUpdate","type","_id","map","day","substring","uploadFileHandler","e","file","target","files","formData","FormData","append","config","headers","data","post","console","uploadFilesHandler","i","length","submitHandler","preventDefault","height","marginTop","border","borderRadius","padding","value","width","backgroundColor"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,SAAf,EAA0BC,WAA1B,QAA6C,kBAA7C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,SAASC,cAAT,EAAyBC,SAAzB,QAA0C,uBAA1C;AACA,SAASC,gBAAT,QAAiC,2BAAjC;;;AAEA,SAASC,aAAT,GAAyB;AAAA;;AACvB,QAAMC,MAAM,GAAGX,SAAS,EAAxB;AACA,QAAMY,QAAQ,GAAGX,WAAW,EAA5B;AACA,QAAMY,QAAQ,GAAGX,WAAW,EAA5B;AAEA,QAAMY,KAAK,GAAGH,MAAM,CAACI,EAArB;AAEA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBpB,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACqB,KAAD,EAAQC,QAAR,IAAoBtB,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACuB,MAAD,EAASC,SAAT,IAAsBxB,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACyB,IAAD,EAAOC,OAAP,IAAkB1B,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAAC2B,WAAD,EAAcC,cAAd,IAAgC5B,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAAC6B,MAAD,EAASC,SAAT,IAAsB9B,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAAC+B,YAAD,EAAeC,eAAf,IAAkChC,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACiC,OAAD,EAAUC,UAAV,IAAwBlC,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACmC,KAAD,EAAQC,QAAR,IAAoBpC,QAAQ,CAAC,CAAD,CAAlC;AACA,QAAM,CAACqC,QAAD,EAAWC,WAAX,IAA0BtC,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACuC,WAAD,EAAcC,cAAd,IAAgCxC,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACyC,YAAD,EAAeC,eAAf,IAAkC1C,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAAC2C,SAAD,EAAYC,YAAZ,IAA4B5C,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAAC6C,gBAAD,EAAmBC,mBAAnB,IAA0C9C,QAAQ,CAAC,EAAD,CAAxD;AACA,QAAM,CAAC+C,iBAAD,EAAoBC,oBAApB,IAA4ChD,QAAQ,CAAC,EAAD,CAA1D;AAEA,QAAMiD,UAAU,GAAG3C,WAAW,CAAE4C,KAAD,IAAWA,KAAK,CAACD,UAAlB,CAA9B;AACA,QAAM;AAAEE,IAAAA,OAAF;AAAWC,IAAAA,KAAX;AAAkBC,IAAAA;AAAlB,MAA0BJ,UAAhC;AAEA,QAAMK,SAAS,GAAGhD,WAAW,CAAE4C,KAAD,IAAWA,KAAK,CAACI,SAAlB,CAA7B;AACA,MAAI;AACFH,IAAAA,OAAO,EAAEI,aADP;AAEFH,IAAAA,KAAK,EAAEI,WAFL;AAGFC,IAAAA,OAAO,EAAEC;AAHP,MAIAJ,SAJJ;AAMAE,EAAAA,WAAW,GAAG,MAAd;AACAvD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIyD,aAAJ,EAAmB;AACjB1C,MAAAA,QAAQ,CAAC;AAAE2C,QAAAA,IAAI,EAAE/C;AAAR,OAAD,CAAR;AACAG,MAAAA,QAAQ,CAAC,gBAAD,CAAR;AACD,KAHD,MAGO;AACL,UAAI,CAACsC,GAAG,CAAClC,IAAL,IAAakC,GAAG,CAACO,GAAJ,KAAY3C,KAA7B,EAAoC;AAClCD,QAAAA,QAAQ,CAACN,cAAc,CAACO,KAAD,CAAf,CAAR;AACD,OAFD,MAEO;AACLG,QAAAA,OAAO,CAACiC,GAAG,CAAClC,IAAL,CAAP;AACAG,QAAAA,QAAQ,CAAC+B,GAAG,CAAChC,KAAL,CAAR;AACAG,QAAAA,SAAS,CAAC6B,GAAG,CAAC9B,MAAL,CAAT;AACAG,QAAAA,OAAO,CAAC2B,GAAG,CAAC5B,IAAL,CAAP;AACAG,QAAAA,cAAc,CAACyB,GAAG,CAAC1B,WAAL,CAAd;AACAG,QAAAA,SAAS,CAACuB,GAAG,CAACxB,MAAL,CAAT;AACAG,QAAAA,eAAe,CAACqB,GAAG,CAACtB,YAAL,CAAf;AACAG,QAAAA,UAAU,CAACmB,GAAG,CAACpB,OAAL,CAAV;AACAG,QAAAA,QAAQ,CAACiB,GAAG,CAAClB,KAAL,CAAR;AACAG,QAAAA,WAAW,CAACe,GAAG,CAAChB,QAAL,CAAX;AACAG,QAAAA,cAAc,CAACa,GAAG,CAACd,WAAL,CAAd;AACAG,QAAAA,eAAe,CAACW,GAAG,CAACZ,YAAJ,CAAiBoB,GAAjB,CAAsBC,GAAD,IAASA,GAAG,CAACC,SAAJ,CAAc,CAAd,EAAiB,EAAjB,CAA9B,CAAD,CAAf;AACD;AACF;AACF,GAtBQ,EAsBN,CAAC/C,QAAD,EAAWD,QAAX,EAAqBE,KAArB,EAA4BoC,GAA5B,EAAiCK,aAAjC,CAtBM,CAAT;;AAwBA,QAAMM,iBAAiB,GAAG,MAAOC,CAAP,IAAa;AACrC,UAAMC,IAAI,GAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAb;AACA,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBL,IAAzB;AACAtB,IAAAA,YAAY,CAAC,IAAD,CAAZ,CAJqC,CAIjB;;AAEpB,QAAI;AACF,YAAM4B,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT;AADI,OAAf;AAMA,YAAM;AAAEC,QAAAA;AAAF,UAAW,MAAM5E,KAAK,CAAC6E,IAAN,CAAW,aAAX,EAA0BN,QAA1B,EAAoCG,MAApC,CAAvB;AAEAlD,MAAAA,QAAQ,CAACoD,IAAD,CAAR;AACA9B,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KAXD,CAWE,OAAOQ,KAAP,EAAc;AACdwB,MAAAA,OAAO,CAACxB,KAAR,CAAcA,KAAd;AACAN,MAAAA,mBAAmB,CACjB,uEADiB,CAAnB;AAGAF,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;AACF,GAxBD;;AA0BA,QAAMiC,kBAAkB,GAAG,MAAOZ,CAAP,IAAa;AACtC,UAAMG,KAAK,GAAGH,CAAC,CAACE,MAAF,CAASC,KAAvB;AACA,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;;AACA,SAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGV,KAAK,CAACW,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrCT,MAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BH,KAAK,CAACU,CAAD,CAA/B;AACD;;AAEDlC,IAAAA,YAAY,CAAC,IAAD,CAAZ;;AAEA,QAAI;AACF,YAAM4B,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT;AADI,OAAf;AAMA,YAAM;AAAEC,QAAAA;AAAF,UAAW,MAAM5E,KAAK,CAAC6E,IAAN,CAAW,oBAAX,EAAiCN,QAAjC,EAA2CG,MAA3C,CAAvB;AACAhD,MAAAA,SAAS,CAAC,CAAC,GAAGkD,IAAJ,CAAD,CAAT;AAEA9B,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KAXD,CAWE,OAAOQ,KAAP,EAAc;AACdwB,MAAAA,OAAO,CAACxB,KAAR,CAAcA,KAAd;AACAJ,MAAAA,oBAAoB,CAClB,uEADkB,CAApB;AAGAJ,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;AACF,GA3BD;;AA4BA,QAAMoC,aAAa,GAAIf,CAAD,IAAO;AAC3BA,IAAAA,CAAC,CAACgB,cAAF;AACAjE,IAAAA,QAAQ,CACNL,SAAS,CAAC;AACRiD,MAAAA,GAAG,EAAE3C,KADG;AAERE,MAAAA,IAFQ;AAGRE,MAAAA,KAHQ;AAIRE,MAAAA,MAJQ;AAKRE,MAAAA,IALQ;AAMRE,MAAAA,WANQ;AAORE,MAAAA,MAPQ;AAQRE,MAAAA,YARQ;AASRE,MAAAA,OATQ;AAURE,MAAAA,KAVQ;AAWRE,MAAAA,QAXQ;AAYRE,MAAAA,WAZQ;AAaRE,MAAAA;AAbQ,KAAD,CADH,CAAR;AAiBD,GAnBD;;AAqBA,sBACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA,4BACE,QAAC,IAAD;AAAM,MAAA,EAAE,EAAC,gBAAT;AAA0B,MAAA,SAAS,EAAC,oBAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAIE;AACE,MAAA,SAAS,EAAC,WADZ;AAEE,MAAA,KAAK,EAAE;AACLyC,QAAAA,MAAM,EAAE,MADH;AAELC,QAAAA,SAAS,EAAE;AAFN,OAFT;AAAA,6BAOE;AAAK,QAAA,SAAS,EAAC,4BAAf;AAAA,+BACE;AACE,UAAA,SAAS,EAAC,0BADZ;AAEE,UAAA,KAAK,EAAE;AACLC,YAAAA,MAAM,EAAE,sBADH;AAELC,YAAAA,YAAY,EAAE,KAFT;AAGLC,YAAAA,OAAO,EAAE;AAHJ,WAFT;AAAA,kCAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBARF,EASG/B,aAAa,iBAAI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,kBATpB,EAUGC,WAAW,iBAAI,QAAC,OAAD;AAAS,YAAA,OAAO,EAAC,QAAjB;AAAA,sBAA2BA;AAA3B;AAAA;AAAA;AAAA;AAAA,kBAVlB,EAWGL,OAAO,gBACN,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,kBADM,GAEJC,KAAK,gBACP,QAAC,OAAD;AAAS,YAAA,OAAO,EAAC,QAAjB;AAAA,sBAA2BA;AAA3B;AAAA;AAAA;AAAA;AAAA,kBADO,gBAGP;AAAM,YAAA,QAAQ,EAAE4B,aAAhB;AAAA,oCACE;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACE;AAAO,gBAAA,OAAO,EAAC,MAAf;AAAsB,gBAAA,SAAS,EAAC,YAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,SAAS,EAAC,eAFZ;AAGE,gBAAA,EAAE,EAAC,MAHL;AAIE,gBAAA,IAAI,EAAC,MAJP;AAKE,gBAAA,WAAW,EAAC,YALd;AAME,gBAAA,KAAK,EAAE7D,IANT;AAOE,gBAAA,QAAQ,EAAG8C,CAAD,IAAO7C,OAAO,CAAC6C,CAAC,CAACE,MAAF,CAASoB,KAAV;AAP1B;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAeG1C,gBAAgB,iBACf,QAAC,OAAD;AAAS,cAAA,OAAO,EAAC,cAAjB;AAAA,wBAAiCA;AAAjC;AAAA;AAAA;AAAA;AAAA,oBAhBJ,eAkBE;AAAK,cAAA,SAAS,EAAC,EAAf;AAAA,sCACE;AAAO,gBAAA,OAAO,EAAC,YAAf;AAA4B,gBAAA,SAAS,EAAC,iBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AAAI,gBAAA,SAAS,EAAC,0BAAd;AAAA,uCACE;AAAI,kBAAA,SAAS,EAAC,iBAAd;AAAA,4BAAiCxB;AAAjC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAlBF,eA0BE;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACE;AACE,gBAAA,SAAS,EAAC,cADZ;AAEE,gBAAA,IAAI,EAAC,MAFP;AAGE,gBAAA,EAAE,EAAC,YAHL;AAIE,gBAAA,QAAQ,EAAE2C;AAJZ;AAAA;AAAA;AAAA;AAAA,sBADF,EAOGrB,SAAS,iBAAI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,sBAPhB;AAAA;AAAA;AAAA;AAAA;AAAA,oBA1BF,EAmCGI,iBAAiB,iBAChB,QAAC,OAAD;AAAS,cAAA,OAAO,EAAC,cAAjB;AAAA,wBAAiCA;AAAjC;AAAA;AAAA;AAAA;AAAA,oBApCJ,eAsCE;AAAK,cAAA,SAAS,EAAC,EAAf;AAAA,sCACE;AAAO,gBAAA,OAAO,EAAC,QAAf;AAAwB,gBAAA,SAAS,EAAC,iBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AAAI,gBAAA,SAAS,EAAC,0BAAd;AAAA,0BACGxB,MAAM,IACLA,MAAM,CAACsC,GAAP,CAAYxC,KAAD,iBACT;AAAI,kBAAA,SAAS,EAAC,iBAAd;AAAA,4BACGA;AADH,mBAAqCA,KAArC;AAAA;AAAA;AAAA;AAAA,wBADF;AAFJ;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAtCF,eAmDE;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACE;AACE,gBAAA,SAAS,EAAC,cADZ;AAEE,gBAAA,IAAI,EAAC,MAFP;AAGE,gBAAA,EAAE,EAAC,YAHL;AAIE,gBAAA,QAAQ,MAJV;AAKE,8BAAW,QALb;AAME,gBAAA,QAAQ,EAAEwD;AANZ;AAAA;AAAA;AAAA;AAAA,sBADF,EASGlC,SAAS,iBAAI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,sBAThB;AAAA;AAAA;AAAA;AAAA;AAAA,oBAnDF,eA8DE;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACE;AAAO,gBAAA,OAAO,EAAC,MAAf;AAAsB,gBAAA,SAAS,EAAC,YAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,SAAS,EAAC,cAFZ;AAGE,gBAAA,EAAE,EAAC,MAHL;AAIE,gBAAA,IAAI,EAAC,MAJP;AAKE,gBAAA,WAAW,EAAC,YALd;AAME,gBAAA,KAAK,EAAElB,IANT;AAOE,gBAAA,QAAQ,EAAGwC,CAAD,IAAOvC,OAAO,CAACuC,CAAC,CAACE,MAAF,CAASoB,KAAV;AAP1B;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,oBA9DF,eA4EE;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACE;AAAO,gBAAA,OAAO,EAAC,aAAf;AAA6B,gBAAA,SAAS,EAAC,YAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,SAAS,EAAC,cAFZ;AAGE,gBAAA,EAAE,EAAC,aAHL;AAIE,gBAAA,IAAI,EAAC,aAJP;AAKE,gBAAA,WAAW,EAAC,mBALd;AAME,gBAAA,KAAK,EAAE5D,WANT;AAOE,gBAAA,QAAQ,EAAGsC,CAAD,IAAOrC,cAAc,CAACqC,CAAC,CAACE,MAAF,CAASoB,KAAV;AAPjC;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,oBA5EF,eA0FE;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACE;AAAO,gBAAA,OAAO,EAAC,cAAf;AAA8B,gBAAA,SAAS,EAAC,YAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,SAAS,EAAC,cAFZ;AAGE,gBAAA,EAAE,EAAC,cAHL;AAIE,gBAAA,IAAI,EAAC,cAJP;AAKE,gBAAA,WAAW,EAAC,oBALd;AAME,gBAAA,KAAK,EAAExD,YANT;AAOE,gBAAA,QAAQ,EAAGkC,CAAD,IAAOjC,eAAe,CAACiC,CAAC,CAACE,MAAF,CAASoB,KAAV;AAPlC;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,oBA1FF,eAwGE;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACE;AAAO,gBAAA,OAAO,EAAC,SAAf;AAAyB,gBAAA,SAAS,EAAC,YAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,SAAS,EAAC,cAFZ;AAGE,gBAAA,EAAE,EAAC,SAHL;AAIE,gBAAA,IAAI,EAAC,SAJP;AAKE,gBAAA,WAAW,EAAC,eALd;AAME,gBAAA,KAAK,EAAEtD,OANT;AAOE,gBAAA,QAAQ,EAAGgC,CAAD,IAAO/B,UAAU,CAAC+B,CAAC,CAACE,MAAF,CAASoB,KAAV;AAP7B;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAxGF,eAsHE;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACE;AAAO,gBAAA,OAAO,EAAC,OAAf;AAAuB,gBAAA,SAAS,EAAC,YAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,SAAS,EAAC,cAFZ;AAGE,gBAAA,EAAE,EAAC,OAHL;AAIE,gBAAA,IAAI,EAAC,OAJP;AAKE,gBAAA,WAAW,EAAC,aALd;AAME,gBAAA,KAAK,EAAEpD,KANT;AAOE,gBAAA,QAAQ,EAAG8B,CAAD,IAAO7B,QAAQ,CAAC6B,CAAC,CAACE,MAAF,CAASoB,KAAV;AAP3B;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAtHF,eAoIE;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACE;AAAO,gBAAA,OAAO,EAAC,UAAf;AAA0B,gBAAA,SAAS,EAAC,YAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,SAAS,EAAC,cAFZ;AAGE,gBAAA,EAAE,EAAC,UAHL;AAIE,gBAAA,IAAI,EAAC,UAJP;AAKE,gBAAA,WAAW,EAAC,gBALd;AAME,gBAAA,KAAK,EAAElD,QANT;AAOE,gBAAA,QAAQ,EAAG4B,CAAD,IAAO3B,WAAW,CAAC2B,CAAC,CAACE,MAAF,CAASoB,KAAV;AAP9B;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,oBApIF,eAkJE;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,sCACE;AAAO,gBAAA,OAAO,EAAC,aAAf;AAA6B,gBAAA,SAAS,EAAC,YAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,gBAAA,SAAS,EAAC,cAFZ;AAGE,gBAAA,EAAE,EAAC,aAHL;AAIE,gBAAA,IAAI,EAAC,aAJP;AAKE,gBAAA,WAAW,EAAC,mBALd;AAME,gBAAA,KAAK,EAAEhD,WANT;AAOE,gBAAA,QAAQ,EAAG0B,CAAD,IAAOzB,cAAc,CAACyB,CAAC,CAACE,MAAF,CAASoB,KAAV;AAPjC;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAlJF,eAgKE;AAAK,cAAA,SAAS,EAAC,EAAf;AAAA,sCACE;AAAO,gBAAA,SAAS,EAAC,iBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAI,gBAAA,SAAS,EAAC,0BAAd;AAAA,0BACG9C,YAAY,IACXA,YAAY,CAACoB,GAAb,CAAkBC,GAAD,iBACf;AAAI,kBAAA,SAAS,EAAC,iBAAd;AAAA,4BACGA;AADH,mBAAqCA,GAArC;AAAA;AAAA;AAAA;AAAA,wBADF;AAFJ;AAAA;AAAA;AAAA;AAAA,sBAFF,eAUE;AAAK,gBAAA,SAAS,EAAC,MAAf;AAAA,uCACE;AACE,kBAAA,IAAI,EAAC,QADP;AAEE,kBAAA,SAAS,EAAC,YAFZ;AAGE,oCAAe,OAHjB;AAIE,oCAAe,gBAJjB;AAKE,kBAAA,KAAK,EAAE;AAAE0B,oBAAAA,KAAK,EAAE,OAAT;AAAkBC,oBAAAA,eAAe,EAAE;AAAnC,mBALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAhKF,eAsLE;AAAQ,cAAA,IAAI,EAAC,QAAb;AAAsB,cAAA,SAAS,EAAC,yBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAtLF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAhBJ,eA2ME,QAAC,aAAD;AACE,YAAA,EAAE,EAAExE,KADN;AAEE,YAAA,uBAAuB,EAAEyB;AAF3B;AAAA;AAAA;AAAA;AAAA,kBA3MF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA,YAJF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAiOD;;GAtWQ7B,a;UACQV,S,EACEC,W,EACAC,W,EAoBEC,W,EAGDA,W;;;KA1BXO,a;AAwWT,eAAeA,aAAf","sourcesContent":["import axios from \"axios\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Link, useParams, useNavigate } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Message from \"../components/Message\";\r\nimport Loader from \"../components/Loader\";\r\nimport ModalCalendar from \"../components/ModalCalendar\";\r\nimport { listCarDetails, updateCar } from \"../actions/carActions\";\r\nimport { CAR_UPDATE_RESET } from \"../constants/carConstants\";\r\n\r\nfunction CarEditScreen() {\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n\r\n  const carId = params.id;\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [images, setImages] = useState([]);\r\n  const [fuel, setFuel] = useState(\"\");\r\n  const [numOfPeople, setNumOfPeople] = useState(\"\");\r\n  const [engine, setEngine] = useState(\"\");\r\n  const [acceleration, setAcceleration] = useState(\"\");\r\n  const [gearbox, setGearbox] = useState(\"\");\r\n  const [price, setPrice] = useState(0);\r\n  const [category, setCategory] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [reservedDays, setReservedDays] = useState([]);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [uploadImageError, setUploadImageError] = useState(\"\");\r\n  const [uploadImagesError, setUploadImagesError] = useState(\"\");\r\n\r\n  const carDetails = useSelector((state) => state.carDetails);\r\n  const { loading, error, car } = carDetails;\r\n\r\n  const carUpdate = useSelector((state) => state.carUpdate);\r\n  let {\r\n    loading: loadingUpdate,\r\n    error: errorUpdate,\r\n    success: successUpdate,\r\n  } = carUpdate;\r\n\r\n  errorUpdate = \"dupa\";\r\n  useEffect(() => {\r\n    if (successUpdate) {\r\n      dispatch({ type: CAR_UPDATE_RESET });\r\n      navigate(\"/admin/carlist\");\r\n    } else {\r\n      if (!car.name || car._id !== carId) {\r\n        dispatch(listCarDetails(carId));\r\n      } else {\r\n        setName(car.name);\r\n        setImage(car.image);\r\n        setImages(car.images);\r\n        setFuel(car.fuel);\r\n        setNumOfPeople(car.numOfPeople);\r\n        setEngine(car.engine);\r\n        setAcceleration(car.acceleration);\r\n        setGearbox(car.gearbox);\r\n        setPrice(car.price);\r\n        setCategory(car.category);\r\n        setDescription(car.description);\r\n        setReservedDays(car.reservedDays.map((day) => day.substring(0, 10)));\r\n      }\r\n    }\r\n  }, [dispatch, navigate, carId, car, successUpdate]);\r\n\r\n  const uploadFileHandler = async (e) => {\r\n    const file = e.target.files[0];\r\n    const formData = new FormData();\r\n    formData.append(\"image\", file);\r\n    setUploading(true); //spinner\r\n\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.post(\"/api/upload\", formData, config);\r\n\r\n      setImage(data);\r\n      setUploading(false);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setUploadImageError(\r\n        \"Invalid file format. The correct file format is .jpg .jpeg .png .webp\"\r\n      );\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const uploadFilesHandler = async (e) => {\r\n    const files = e.target.files;\r\n    const formData = new FormData();\r\n    for (let i = 0; i < files.length; i++) {\r\n      formData.append(\"images\", files[i]);\r\n    }\r\n\r\n    setUploading(true);\r\n\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.post(\"/api/upload/images\", formData, config);\r\n      setImages([...data]);\r\n\r\n      setUploading(false);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setUploadImagesError(\r\n        \"Invalid file format. The correct file format is .jpg .jpeg .png .webp\"\r\n      );\r\n      setUploading(false);\r\n    }\r\n  };\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    dispatch(\r\n      updateCar({\r\n        _id: carId,\r\n        name,\r\n        image,\r\n        images,\r\n        fuel,\r\n        numOfPeople,\r\n        engine,\r\n        acceleration,\r\n        gearbox,\r\n        price,\r\n        category,\r\n        description,\r\n        reservedDays,\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <Link to=\"/admin/carlist\" className=\"btn btn-light my-3\">\r\n        Go Back\r\n      </Link>\r\n      <div\r\n        className=\"container\"\r\n        style={{\r\n          height: \"40vh\",\r\n          marginTop: \"5vh\",\r\n        }}\r\n      >\r\n        <div className=\"row justify-content-center\">\r\n          <div\r\n            className=\"col-12 col-md-8 col-lg-6\"\r\n            style={{\r\n              border: \".5px solid lightgray\",\r\n              borderRadius: \"5px\",\r\n              padding: \"30px\",\r\n            }}\r\n          >\r\n            <h4>Edit Car</h4>\r\n            {loadingUpdate && <Loader />}\r\n            {errorUpdate && <Message variant=\"danger\">{errorUpdate}</Message>}\r\n            {loading ? (\r\n              <Loader />\r\n            ) : error ? (\r\n              <Message variant=\"danger\">{error}</Message>\r\n            ) : (\r\n              <form onSubmit={submitHandler}>\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"name\" className=\"form-label\">\r\n                    Name\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control \"\r\n                    id=\"name\"\r\n                    name=\"name\"\r\n                    placeholder=\"Enter name\"\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                  />\r\n                </div>\r\n                {uploadImageError && (\r\n                  <Message variant=\"alert-danger\">{uploadImageError}</Message>\r\n                )}\r\n                <div className=\"\">\r\n                  <label htmlFor=\"image-file\" className=\"form-label my-0\">\r\n                    Main image\r\n                  </label>\r\n                  <ul className=\"list-group-flush p-0 m-0\">\r\n                    <li className=\"list-group-item\">{image}</li>\r\n                  </ul>\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <input\r\n                    className=\"form-control\"\r\n                    type=\"file\"\r\n                    id=\"image-file\"\r\n                    onChange={uploadFileHandler}\r\n                  />\r\n                  {uploading && <Loader />}\r\n                </div>\r\n                {uploadImagesError && (\r\n                  <Message variant=\"alert-danger\">{uploadImagesError}</Message>\r\n                )}\r\n                <div className=\"\">\r\n                  <label htmlFor=\"images\" className=\"form-label my-0\">\r\n                    Images:\r\n                  </label>\r\n                  <ul className=\"list-group-flush p-0 m-0\">\r\n                    {images &&\r\n                      images.map((image) => (\r\n                        <li className=\"list-group-item\" key={image}>\r\n                          {image}\r\n                        </li>\r\n                      ))}\r\n                  </ul>\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <input\r\n                    className=\"form-control\"\r\n                    type=\"file\"\r\n                    id=\"image-file\"\r\n                    multiple\r\n                    aria-label=\"Upload\"\r\n                    onChange={uploadFilesHandler}\r\n                  />\r\n                  {uploading && <Loader />}\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"fuel\" className=\"form-label\">\r\n                    Fuel\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    id=\"fuel\"\r\n                    name=\"fuel\"\r\n                    placeholder=\"Enter fuel\"\r\n                    value={fuel}\r\n                    onChange={(e) => setFuel(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"numOfPeople\" className=\"form-label\">\r\n                    Number Of People\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    id=\"numOfPeople\"\r\n                    name=\"numOfPeople\"\r\n                    placeholder=\"Enter numOfPeople\"\r\n                    value={numOfPeople}\r\n                    onChange={(e) => setNumOfPeople(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"acceleration\" className=\"form-label\">\r\n                    Acceleration\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    id=\"acceleration\"\r\n                    name=\"acceleration\"\r\n                    placeholder=\"Enter acceleration\"\r\n                    value={acceleration}\r\n                    onChange={(e) => setAcceleration(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"gearbox\" className=\"form-label\">\r\n                    Gearbox\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    id=\"gearbox\"\r\n                    name=\"gearbox\"\r\n                    placeholder=\"Enter gearbox\"\r\n                    value={gearbox}\r\n                    onChange={(e) => setGearbox(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"price\" className=\"form-label\">\r\n                    Price\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    id=\"price\"\r\n                    name=\"price\"\r\n                    placeholder=\"Enter price\"\r\n                    value={price}\r\n                    onChange={(e) => setPrice(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"category\" className=\"form-label\">\r\n                    Category\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    id=\"category\"\r\n                    name=\"category\"\r\n                    placeholder=\"Enter category\"\r\n                    value={category}\r\n                    onChange={(e) => setCategory(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"description\" className=\"form-label\">\r\n                    Description\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    id=\"description\"\r\n                    name=\"description\"\r\n                    placeholder=\"Enter description\"\r\n                    value={description}\r\n                    onChange={(e) => setDescription(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"\">\r\n                  <label className=\"form-label my-0\">Reserved days: </label>\r\n                  <ul className=\"list-group-flush p-0 m-0\">\r\n                    {reservedDays &&\r\n                      reservedDays.map((day) => (\r\n                        <li className=\"list-group-item\" key={day}>\r\n                          {day}\r\n                        </li>\r\n                      ))}\r\n                  </ul>\r\n                  <div className=\"my-1\">\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn btn-sm\"\r\n                      data-bs-toggle=\"modal\"\r\n                      data-bs-target=\"#modalCalendar\"\r\n                      style={{ width: \"110px\", backgroundColor: \"#e9ecef\" }}\r\n                    >\r\n                      Choose dates\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                <button type=\"submit\" className=\"btn btn-cardialred mt-3\">\r\n                  Update/Create Car\r\n                </button>\r\n              </form>\r\n            )}\r\n            <ModalCalendar\r\n              id={carId}\r\n              setReservedDatesByAdmin={setReservedDays}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CarEditScreen;\r\n"]},"metadata":{},"sourceType":"module"}