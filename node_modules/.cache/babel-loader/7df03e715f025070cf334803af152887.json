{"ast":null,"code":"var _jsxFileName = \"E:\\\\ROBERT PROJECTS\\\\car-rental2022\\\\frontend\\\\src\\\\screens\\\\CarEditScreen.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useParams, useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Message from \"../components/Message\";\nimport Loader from \"../components/Loader\";\nimport ModalCalendar from \"../components/ModalCalendar\";\nimport { listCarDetails, updateCar } from \"../actions/carActions\";\nimport { CAR_UPDATE_RESET } from \"../constants/carConstants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CarEditScreen() {\n  _s();\n\n  const params = useParams();\n  const navigate = useNavigate();\n  const carId = params.id;\n  const [name, setName] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n  const [images, setImages] = useState([]);\n  const [fuel, setFuel] = useState(\"\");\n  const [numOfPeople, setNumOfPeople] = useState(\"\");\n  const [engine, setEngine] = useState(\"\");\n  const [acceleration, setAcceleration] = useState(\"\");\n  const [gearbox, setGearbox] = useState(\"\");\n  const [price, setPrice] = useState(0);\n  const [category, setCategory] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [reservedDays, setReservedDays] = useState([]);\n  const [uploading, setUploading] = useState(false);\n  const [modalShow, setModalShow] = useState(false);\n  const dispatch = useDispatch();\n  const carDetails = useSelector(state => state.carDetails);\n  const {\n    loading,\n    error,\n    car\n  } = carDetails;\n  const carUpdate = useSelector(state => state.carUpdate);\n  const {\n    loading: loadingUpdate,\n    error: errorUpdate,\n    success: successUpdate\n  } = carUpdate;\n\n  const modalHandler = () => {\n    setModalShow(true);\n  };\n\n  useEffect(() => {\n    if (successUpdate) {\n      dispatch({\n        type: CAR_UPDATE_RESET\n      });\n      navigate(\"/admin/carlist\");\n    } else {\n      if (!car.name || car._id !== carId) {\n        dispatch(listCarDetails(carId));\n      } else {\n        setName(car.name);\n        setImage(car.image);\n        setImages(car.images);\n        setFuel(car.fuel);\n        setNumOfPeople(car.numOfPeople);\n        setEngine(car.engine);\n        setAcceleration(car.acceleration);\n        setGearbox(car.gearbox);\n        setPrice(car.price);\n        setCategory(car.category);\n        setDescription(car.description);\n        setReservedDays(car.reservedDays.map(day => day.substring(0, 10)));\n      }\n    }\n  }, [dispatch, navigate, carId, car, successUpdate]);\n\n  const uploadFileHandler = async e => {\n    const file = e.target.files[0];\n    const formData = new FormData();\n    formData.append(\"image\", file);\n    setUploading(true); //spinner\n\n    try {\n      const config = {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      };\n      const {\n        data\n      } = await axios.post(\"/api/upload\", formData, config); //data is a path\n\n      setImage(data);\n      setUploading(false);\n    } catch (error) {\n      console.error(error);\n      setUploading(false);\n    }\n  };\n\n  const uploadFilesHandler = async e => {\n    const files = e.target.files;\n    const formData = new FormData();\n\n    for (let i = 0; i < files.length; i++) {\n      formData.append(\"images\", files[i]);\n    }\n\n    setUploading(true); //spinner\n\n    try {\n      const config = {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      };\n      const {\n        data\n      } = await axios.post(\"/api/upload/images\", formData, config); //data is a path\n\n      setImages([...data]); //setImages(data);\n\n      setUploading(false);\n    } catch (error) {\n      console.error(error);\n      setUploading(false);\n    }\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(updateCar({\n      _id: carId,\n      name,\n      image,\n      images,\n      fuel,\n      numOfPeople,\n      engine,\n      acceleration,\n      gearbox,\n      price,\n      category,\n      description,\n      reservedDays\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/admin/carlist\",\n      className: \"btn btn-light my-3\",\n      children: \"Go Back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      style: {\n        height: \"40vh\",\n        marginTop: \"5vh\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-md-8 col-lg-6\",\n          style: {\n            border: \".5px solid lightgray\",\n            borderRadius: \"5px\",\n            padding: \"30px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Edit Car\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this), loadingUpdate && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 31\n          }, this), errorUpdate && /*#__PURE__*/_jsxDEV(Message, {\n            variant: \"danger\",\n            children: errorUpdate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 29\n          }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this) : error ? /*#__PURE__*/_jsxDEV(Message, {\n            variant: \"danger\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: submitHandler,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"name\",\n                className: \"form-label\",\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                id: \"name\",\n                placeholder: \"Enter name\",\n                value: name,\n                onChange: e => setName(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"name\",\n                className: \"form-label\",\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"list-group-flush p-0 m-0\",\n                children: /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"list-group-item\",\n                  children: image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control\",\n                type: \"file\",\n                id: \"formFile\",\n                onChange: uploadFileHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, this), uploading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"name\",\n                className: \"form-label\",\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"list-group-flush p-0 m-0\",\n                children: /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"list-group-item\",\n                  children: image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control\",\n                type: \"file\",\n                id: \"formFile\",\n                onChange: uploadFileHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 19\n              }, this), uploading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-cardialred mt-3\",\n              children: \"Update Car\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CarEditScreen, \"SsnLhnHov3LFIz53k3AqsYI0TFk=\", false, function () {\n  return [useParams, useNavigate, useDispatch, useSelector, useSelector];\n});\n\n_c = CarEditScreen;\nexport default CarEditScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"CarEditScreen\");","map":{"version":3,"sources":["E:/ROBERT PROJECTS/car-rental2022/frontend/src/screens/CarEditScreen.js"],"names":["axios","React","useState","useEffect","Link","useParams","useNavigate","useDispatch","useSelector","Message","Loader","ModalCalendar","listCarDetails","updateCar","CAR_UPDATE_RESET","CarEditScreen","params","navigate","carId","id","name","setName","image","setImage","images","setImages","fuel","setFuel","numOfPeople","setNumOfPeople","engine","setEngine","acceleration","setAcceleration","gearbox","setGearbox","price","setPrice","category","setCategory","description","setDescription","reservedDays","setReservedDays","uploading","setUploading","modalShow","setModalShow","dispatch","carDetails","state","loading","error","car","carUpdate","loadingUpdate","errorUpdate","success","successUpdate","modalHandler","type","_id","map","day","substring","uploadFileHandler","e","file","target","files","formData","FormData","append","config","headers","data","post","console","uploadFilesHandler","i","length","submitHandler","preventDefault","height","marginTop","border","borderRadius","padding","value"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Link, useParams, useNavigate } from \"react-router-dom\";\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Message from \"../components/Message\";\r\nimport Loader from \"../components/Loader\";\r\nimport ModalCalendar from \"../components/ModalCalendar\";\r\n\r\nimport { listCarDetails, updateCar } from \"../actions/carActions\";\r\nimport { CAR_UPDATE_RESET } from \"../constants/carConstants\";\r\n\r\nfunction CarEditScreen() {\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const carId = params.id;\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [images, setImages] = useState([]);\r\n  const [fuel, setFuel] = useState(\"\");\r\n  const [numOfPeople, setNumOfPeople] = useState(\"\");\r\n  const [engine, setEngine] = useState(\"\");\r\n  const [acceleration, setAcceleration] = useState(\"\");\r\n  const [gearbox, setGearbox] = useState(\"\");\r\n  const [price, setPrice] = useState(0);\r\n  const [category, setCategory] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [reservedDays, setReservedDays] = useState([]);\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  const [modalShow, setModalShow] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const carDetails = useSelector((state) => state.carDetails);\r\n  const { loading, error, car } = carDetails;\r\n\r\n  const carUpdate = useSelector((state) => state.carUpdate);\r\n  const {\r\n    loading: loadingUpdate,\r\n    error: errorUpdate,\r\n    success: successUpdate,\r\n  } = carUpdate;\r\n\r\n  const modalHandler = () => {\r\n    setModalShow(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (successUpdate) {\r\n      dispatch({ type: CAR_UPDATE_RESET });\r\n      navigate(\"/admin/carlist\");\r\n    } else {\r\n      if (!car.name || car._id !== carId) {\r\n        dispatch(listCarDetails(carId));\r\n      } else {\r\n        setName(car.name);\r\n        setImage(car.image);\r\n        setImages(car.images);\r\n        setFuel(car.fuel);\r\n        setNumOfPeople(car.numOfPeople);\r\n        setEngine(car.engine);\r\n        setAcceleration(car.acceleration);\r\n        setGearbox(car.gearbox);\r\n        setPrice(car.price);\r\n        setCategory(car.category);\r\n        setDescription(car.description);\r\n        setReservedDays(car.reservedDays.map((day) => day.substring(0, 10)));\r\n      }\r\n    }\r\n  }, [dispatch, navigate, carId, car, successUpdate]);\r\n\r\n  const uploadFileHandler = async (e) => {\r\n    const file = e.target.files[0];\r\n    const formData = new FormData();\r\n    formData.append(\"image\", file);\r\n    setUploading(true); //spinner\r\n\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.post(\"/api/upload\", formData, config);\r\n      //data is a path\r\n\r\n      setImage(data);\r\n      setUploading(false);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const uploadFilesHandler = async (e) => {\r\n    const files = e.target.files;\r\n    const formData = new FormData();\r\n    for (let i = 0; i < files.length; i++) {\r\n      formData.append(\"images\", files[i]);\r\n    }\r\n\r\n    setUploading(true); //spinner\r\n\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.post(\"/api/upload/images\", formData, config);\r\n\r\n      //data is a path\r\n      setImages([...data]);\r\n\r\n      //setImages(data);\r\n      setUploading(false);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setUploading(false);\r\n    }\r\n  };\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    dispatch(\r\n      updateCar({\r\n        _id: carId,\r\n        name,\r\n        image,\r\n        images,\r\n        fuel,\r\n        numOfPeople,\r\n        engine,\r\n        acceleration,\r\n        gearbox,\r\n        price,\r\n        category,\r\n        description,\r\n        reservedDays,\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <Link to=\"/admin/carlist\" className=\"btn btn-light my-3\">\r\n        Go Back\r\n      </Link>\r\n      <div\r\n        className=\"container\"\r\n        style={{\r\n          height: \"40vh\",\r\n          marginTop: \"5vh\",\r\n        }}\r\n      >\r\n        <div className=\"row justify-content-center\">\r\n          <div\r\n            className=\"col-12 col-md-8 col-lg-6\"\r\n            style={{\r\n              border: \".5px solid lightgray\",\r\n              borderRadius: \"5px\",\r\n              padding: \"30px\",\r\n            }}\r\n          >\r\n            <h4>Edit Car</h4>\r\n            {loadingUpdate && <Loader />}\r\n            {errorUpdate && <Message variant=\"danger\">{errorUpdate}</Message>}\r\n            {loading ? (\r\n              <Loader />\r\n            ) : error ? (\r\n              <Message variant=\"danger\">{error}</Message>\r\n            ) : (\r\n              <form onSubmit={submitHandler}>\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"name\" className=\"form-label\">\r\n                    Name\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    id=\"name\"\r\n                    placeholder=\"Enter name\"\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"\">\r\n                  <label htmlFor=\"name\" className=\"form-label\">\r\n                    Image\r\n                  </label>\r\n                  <ul className=\"list-group-flush p-0 m-0\">\r\n                    <li className=\"list-group-item\">{image}</li>\r\n                  </ul>\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <input\r\n                    className=\"form-control\"\r\n                    type=\"file\"\r\n                    id=\"formFile\"\r\n                    onChange={uploadFileHandler}\r\n                  />\r\n                  {uploading && <Loader />}\r\n                </div>\r\n                <div className=\"\">\r\n                  <label htmlFor=\"name\" className=\"form-label\">\r\n                    Image\r\n                  </label>\r\n                  <ul className=\"list-group-flush p-0 m-0\">\r\n                    <li className=\"list-group-item\">{image}</li>\r\n                  </ul>\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <input\r\n                    className=\"form-control\"\r\n                    type=\"file\"\r\n                    id=\"formFile\"\r\n                    onChange={uploadFileHandler}\r\n                  />\r\n                  {uploading && <Loader />}\r\n                </div>\r\n\r\n                <button type=\"submit\" className=\"btn btn-cardialred mt-3\">\r\n                  Update Car\r\n                </button>\r\n              </form>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CarEditScreen;\r\n"]},"metadata":{},"sourceType":"module"}